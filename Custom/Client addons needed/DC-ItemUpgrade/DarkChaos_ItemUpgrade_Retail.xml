<Ui xmlns="http://www.blizzard.com/wow/ui/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.blizzard.com/wow/ui/ ..\FrameXML\UI.xsd">

    <!--
        DC-ItemUpgrade - Retail-inspired layout for Wrath of the Lich King
    -->

    <GameTooltip name="DC_ItemUpgradeTooltipTemplate" inherits="GameTooltipTemplate" frameStrata="TOOLTIP" virtual="true">
        <Size x="220" y="120"/>
    </GameTooltip>

    <Frame name="DarkChaos_ItemUpgradeFrame" parent="UIParent" movable="true" enableMouse="true" hidden="true" toplevel="true">
        <Size x="640" y="540"/>
        <Anchors>
            <Anchor point="CENTER"/>
        </Anchors>
        <Backdrop bgFile="Interface\DialogFrame\UI-DialogBox-Background" edgeFile="Interface\DialogFrame\UI-DialogBox-Border" tile="true">
            <BackgroundInsets>
                <AbsInset left="11" right="12" top="12" bottom="11"/>
            </BackgroundInsets>
            <TileSize>
                <AbsValue val="32"/>
            </TileSize>
            <EdgeSize>
                <AbsValue val="32"/>
            </EdgeSize>
        </Backdrop>

        <Layers>
            <Layer level="BACKGROUND">
                <Texture parentKey="HeaderBackground" file="Interface\Buttons\WHITE8X8">
                    <Anchors>
                        <Anchor point="TOPLEFT" x="26" y="-40"/>
                        <Anchor point="BOTTOMRIGHT" relativeKey="$parent.ItemInfo" x="12" y="-8"/>
                    </Anchors>
                    <Color r="0.18" g="0.22" b="0.32" a="0.35"/>
                </Texture>
                <Texture parentKey="BodyBackground" file="Interface\Buttons\WHITE8X8">
                    <Anchors>
                        <Anchor point="TOPLEFT" relativeKey="$parent.CurrentPanel" x="-14" y="14"/>
                        <Anchor point="BOTTOMRIGHT" relativeKey="$parent.CostFrame" x="14" y="-14"/>
                    </Anchors>
                    <Color r="0.08" g="0.10" b="0.15" a="0.28"/>
                </Texture>
            </Layer>
            <Layer level="ARTWORK">
                <FontString parentKey="TitleText" inherits="GameFontNormalLarge" text="Item Upgrade" justifyH="CENTER">
                    <Anchors>
                        <Anchor point="TOP" x="0" y="-16"/>
                    </Anchors>
                </FontString>
                <FontString parentKey="MissingDescription" inherits="GameFontHighlight" justifyH="CENTER" text="Insert an item to begin upgrading.">
                    <Size x="360" y="0"/>
                    <Anchors>
                        <Anchor point="TOP" x="0" y="-170"/>
                    </Anchors>
                    <Color r="0.75" g="0.75" b="0.85"/>
                </FontString>
                <FontString parentKey="ErrorText" inherits="GameFontHighlight" justifyH="CENTER" hidden="true">
                    <Size x="360" y="0"/>
                    <Anchors>
                        <Anchor point="TOP" x="0" y="-170"/>
                    </Anchors>
                    <Color r="1.0" g="0.2" b="0.2"/>
                </FontString>
            </Layer>
        </Layers>

        <Frames>
            <Button name="$parentCloseButton" inherits="UIPanelCloseButton">
                <Anchors>
                    <Anchor point="TOPRIGHT" x="-5" y="-5"/>
                </Anchors>
            </Button>

            <Button name="$parentItemSlot" parentKey="ItemSlot" inherits="ItemButtonTemplate">
                <Size x="58" y="58"/>
                <Anchors>
                    <Anchor point="TOPLEFT" x="36" y="-42"/>
                </Anchors>
                <Layers>
                    <Layer level="OVERLAY">
                        <Texture parentKey="EmptyGlow" file="Interface\Buttons\UI-ActionButton-Border" alphaMode="ADD" hidden="true">
                            <Size x="64" y="64"/>
                            <Anchors>
                                <Anchor point="CENTER"/>
                            </Anchors>
                            <Color r="0.2" g="1.0" b="0.2" a="0.55"/>
                        </Texture>
                    </Layer>
                </Layers>
                <Scripts>
                    <OnLoad>
                        this:RegisterForDrag("LeftButton");
                        this:RegisterForClicks("LeftButtonUp", "RightButtonUp");
                    </OnLoad>
                    <OnEnter>
                        DarkChaos_ItemUpgrade_ItemSlot_OnEnter(this);
                    </OnEnter>
                    <OnLeave>
                        GameTooltip:Hide();
                    </OnLeave>
                    <OnClick>
                        DarkChaos_ItemUpgrade_ItemSlot_OnClick(this, button);
                    </OnClick>
                    <OnDragStart>
                        DarkChaos_ItemUpgrade_ItemSlot_OnDrag(this);
                    </OnDragStart>
                    <OnReceiveDrag>
                        DarkChaos_ItemUpgrade_ItemSlot_OnDrag(this);
                    </OnReceiveDrag>
                </Scripts>
            </Button>

            <Frame parentKey="ItemInfo">
                <Size x="530" y="24"/>
                <Anchors>
                    <Anchor point="TOPLEFT" x="112" y="-50"/>
                </Anchors>
                <Layers>
                    <Layer level="ARTWORK">
                        <FontString parentKey="MissingItemText" inherits="GameFontHighlightMedium" text="Insert Item to Upgrade">
                            <Anchors>
                                <Anchor point="LEFT"/>
                            </Anchors>
                            <Color r="0.7" g="0.7" b="0.7"/>
                        </FontString>
                        <FontString parentKey="ItemName" inherits="GameFontNormalLarge" justifyH="LEFT" hidden="true">
                            <Size x="500" y="0"/>
                            <Anchors>
                                <Anchor point="LEFT"/>
                            </Anchors>
                        </FontString>
                        <FontString parentKey="ItemLevelSummary" inherits="GameFontHighlight" hidden="true">
                            <Size x="416" y="0"/>
                            <Anchors>
                                <Anchor point="TOPLEFT" relativeKey="$parent.ProgressBar" relativePoint="BOTTOMLEFT" x="0" y="-4"/>
                            </Anchors>
                        </FontString>
                        <FontString parentKey="UpgradeProgress" inherits="GameFontHighlight" hidden="true">
                            <Size x="416" y="0"/>
                            <Anchors>
                                <Anchor point="TOPLEFT" relativeKey="$parent.ItemLevelSummary" relativePoint="BOTTOMLEFT" x="0" y="-4"/>
                            </Anchors>
                        </FontString>
                    </Layer>
                </Layers>

                <Frames>
                    <Frame parentKey="ProgressBar" hidden="true">
                        <Size x="436" y="24"/>
                        <Anchors>
                            <Anchor point="TOPLEFT" relativeKey="$parent.parent.CurrentPanel" relativePoint="BOTTOMLEFT" x="0" y="-4"/>
                            <Anchor point="TOPRIGHT" relativeKey="$parent.parent.UpgradePanel" relativePoint="BOTTOMRIGHT" x="0" y="-4"/>
                        </Anchors>
                        <Backdrop bgFile="Interface\Tooltips\UI-Tooltip-Background" edgeFile="Interface\Tooltips\UI-Tooltip-Border" tile="true">
                            <EdgeSize>
                                <AbsValue val="8"/>
                            </EdgeSize>
                            <BackgroundInsets>
                                <AbsInset left="2" right="2" top="2" bottom="2"/>
                            </BackgroundInsets>
                        </Backdrop>
                        <BackdropColor r="0.1" g="0.1" b="0.1" a="0.8"/>
                        <BackdropBorderColor r="0.4" g="0.4" b="0.4" a="1"/>
                        <Layers>
                            <Layer level="ARTWORK">
                                <Texture parentKey="Fill" file="Interface\TargetingFrame\UI-StatusBar">
                                    <Anchors>
                                        <Anchor point="TOPLEFT" x="3" y="-3"/>
                                        <Anchor point="BOTTOMLEFT" x="3" y="3"/>
                                    </Anchors>
                                    <Color r="0.2" g="0.8" b="0.2" a="1"/>
                                </Texture>
                                <FontString parentKey="Text" inherits="GameFontHighlightSmall" justifyH="CENTER">
                                    <Anchors>
                                        <Anchor point="CENTER"/>
                                    </Anchors>
                                    <Color r="1" g="1" b="1"/>
                                </FontString>
                            </Layer>
                        </Layers>
                    </Frame>
                    <Frame parentKey="TierIndicator" hidden="true">
                        <Size x="20" y="20"/>
                        <Anchors>
                            <Anchor point="TOPRIGHT" relativeKey="$parent.ItemName" relativePoint="TOPLEFT" x="-4" y="0"/>
                        </Anchors>
                        <Layers>
                            <Layer level="ARTWORK">
                                <Texture parentKey="Icon" file="Interface\Icons\INV_Misc_QuestionMark">
                                    <Size x="18" y="18"/>
                                    <Anchors>
                                        <Anchor point="CENTER"/>
                                    </Anchors>
                                </Texture>
                            </Layer>
                        </Layers>
                    </Frame>
                </Frames>
            </Frame>

            <Frame parentKey="CurrentPanel" hidden="true">
                <Size x="240" y="380"/>
                <Anchors>
                    <Anchor point="TOPLEFT" x="26" y="-88"/>
                </Anchors>
                <Backdrop bgFile="Interface\Tooltips\UI-Tooltip-Background" edgeFile="Interface\Tooltips\UI-Tooltip-Border" tile="true">
                    <EdgeSize>
                        <AbsValue val="16"/>
                    </EdgeSize>
                    <BackgroundInsets>
                        <AbsInset left="5" right="5" top="5" bottom="5"/>
                    </BackgroundInsets>
                </Backdrop>
                <BackdropColor r="0.11" g="0.13" b="0.19" a="0.92"/>
                <BackdropBorderColor r="0.26" g="0.32" b="0.42" a="0.9"/>
                <Layers>
                    <Layer level="ARTWORK">
                        <FontString parentKey="Header" inherits="GameFontHighlight" text="Current Item">
                            <Anchors>
                                <Anchor point="TOPLEFT" x="12" y="-10"/>
                            </Anchors>
                        </FontString>
                        <FontString parentKey="StatsText" inherits="GameFontHighlightSmall" justifyH="LEFT">
                            <Size x="182" y="0"/>
                            <Anchors>
                                <Anchor point="TOPLEFT" x="12" y="-36"/>
                            </Anchors>
                        </FontString>
                        <FontString parentKey="CurrencyHeader" inherits="GameFontNormalSmall" text="Resources:" hidden="true">
                            <Anchors>
                                <Anchor point="BOTTOMLEFT" x="12" y="16"/>
                            </Anchors>
                        </FontString>
                        <FontString parentKey="CurrencyDetail" inherits="GameFontHighlightSmall" hidden="true">
                            <Size x="182" y="0"/>
                            <Anchors>
                                <Anchor point="LEFT" relativeKey="$parent.CurrencyHeader" relativePoint="RIGHT" x="6" y="0"/>
                            </Anchors>
                        </FontString>
                    </Layer>
                </Layers>
            </Frame>

            <Frame parentKey="UpgradePanel" hidden="true">
                <Size x="240" y="380"/>
                <Anchors>
                    <Anchor point="TOPLEFT" x="282" y="-88"/>
                </Anchors>
                <Backdrop bgFile="Interface\Tooltips\UI-Tooltip-Background" edgeFile="Interface\Tooltips\UI-Tooltip-Border" tile="true">
                    <EdgeSize>
                        <AbsValue val="16"/>
                    </EdgeSize>
                    <BackgroundInsets>
                        <AbsInset left="5" right="5" top="5" bottom="5"/>
                    </BackgroundInsets>
                </Backdrop>
                <BackdropColor r="0.11" g="0.13" b="0.19" a="0.92"/>
                <BackdropBorderColor r="0.26" g="0.32" b="0.42" a="0.9"/>
                <Layers>
                    <Layer level="ARTWORK">
                        <FontString parentKey="Header" inherits="GameFontHighlight" text="Upgrade Preview">
                            <Anchors>
                                <Anchor point="TOPLEFT" x="12" y="-10"/>
                            </Anchors>
                        </FontString>
                        <FontString parentKey="StatsText" inherits="GameFontHighlightSmall" justifyH="LEFT">
                            <Size x="212" y="0"/>
                            <Anchors>
                                <Anchor point="TOPLEFT" x="12" y="-36"/>
                            </Anchors>
                        </FontString>
                        <FontString parentKey="CostHeader" inherits="GameFontNormalSmall" text="Cost:" hidden="true">
                            <Anchors>
                                <Anchor point="BOTTOMLEFT" x="12" y="16"/>
                            </Anchors>
                        </FontString>
                        <FontString parentKey="CostDetail" inherits="GameFontHighlightSmall" hidden="true">
                            <Size x="182" y="0"/>
                            <Anchors>
                                <Anchor point="LEFT" relativeKey="$parent.CostHeader" relativePoint="RIGHT" x="6" y="0"/>
                            </Anchors>
                        </FontString>
                    </Layer>
                </Layers>
            </Frame>

            <GameTooltip name="$parentLeftTooltip" parentKey="LeftTooltip" inherits="DC_ItemUpgradeTooltipTemplate" hidden="true">
                <Anchors>
                    <Anchor point="TOPLEFT" relativeKey="$parent.CurrentPanel" x="8" y="-28"/>
                </Anchors>
            </GameTooltip>

            <GameTooltip name="$parentRightTooltip" parentKey="RightTooltip" inherits="DC_ItemUpgradeTooltipTemplate" hidden="true">
                <Anchors>
                    <Anchor point="TOPLEFT" relativeKey="$parent.UpgradePanel" x="8" y="-28"/>
                </Anchors>
                <Layers>
                    <Layer level="OVERLAY">
                        <Texture parentKey="UpgradeGlow" file="Interface\Buttons\WHITE8X8" alphaMode="ADD" hidden="true">
                            <Anchors>
                                <Anchor point="TOPLEFT" x="-10" y="10"/>
                                <Anchor point="BOTTOMRIGHT" x="10" y="-10"/>
                            </Anchors>
                            <Color r="1" g="0.8" b="0" a="0"/>
                        </Texture>
                    </Layer>
                </Layers>
            </GameTooltip>

            <Frame parentKey="Arrow" hidden="true">
                <Size x="32" y="32"/>
                <Anchors>
                    <Anchor point="CENTER" x="0" y="-46"/>
                </Anchors>
                <Layers>
                    <Layer level="ARTWORK">
                        <Texture parentKey="Texture" file="Interface\Buttons\UI-SpellbookIcon-NextPage-Up">
                            <Size x="24" y="24"/>
                            <Anchors>
                                <Anchor point="CENTER"/>
                            </Anchors>
                        </Texture>
                    </Layer>
                </Layers>
            </Frame>

            <Frame parentKey="CostFrame" hidden="true">
                <Size x="140" y="300"/>
                <Anchors>
                    <Anchor point="TOPLEFT" relativeKey="$parent.UpgradePanel" relativePoint="TOPRIGHT" x="16" y="0"/>
                    <Anchor point="BOTTOMLEFT" relativeKey="$parent.UpgradePanel" relativePoint="BOTTOMRIGHT" x="16" y="0"/>
                </Anchors>
                <Layers>
                    <Layer level="BACKGROUND">
                        <Texture parentKey="Background" file="Interface\Buttons\WHITE8X8">
                            <Anchors>
                                <Anchor point="TOPLEFT" x="8" y="-6"/>
                                <Anchor point="BOTTOMRIGHT" x="-8" y="8"/>
                            </Anchors>
                            <Color r="0.07" g="0.09" b="0.14" a="0.55"/>
                        </Texture>
                    </Layer>
                    <Layer level="ARTWORK">
                        <FontString parentKey="Title" inherits="GameFontHighlight" text="Upgrade Tokens">
                            <Anchors>
                                <Anchor point="TOPLEFT" x="20" y="-20"/>
                            </Anchors>
                        </FontString>
                        
                        <FontString parentKey="RequiredLabel" inherits="GameFontHighlightSmall" text="Required:">
                            <Anchors>
                                <Anchor point="TOPLEFT" x="18" y="-50"/>
                            </Anchors>
                        </FontString>
                        <FontString parentKey="RequiredValue" inherits="GameFontHighlight">
                            <Size x="90" y="24"/>
                            <Anchors>
                                <Anchor point="TOPLEFT" relativeKey="$parent.RequiredLabel" relativePoint="BOTTOMLEFT" x="0" y="-6"/>
                            </Anchors>
                            <JustifyH value="LEFT"/>
                            <JustifyV value="TOP"/>
                            <Color r="1" g="1" b="1"/>
                        </FontString>
                        <Texture parentKey="RequiredIcon" file="Interface\Icons\INV_Misc_Coin_01">
                            <Size x="16" y="16"/>
                            <Anchors>
                                <Anchor point="LEFT" relativeKey="$parent.RequiredValue" relativePoint="RIGHT" x="6" y="-3"/>
                            </Anchors>
                        </Texture>
                        
                        <FontString parentKey="OwnedLabel" inherits="GameFontHighlightSmall" text="Carried:">
                            <Anchors>
                                <Anchor point="TOPLEFT" relativeKey="$parent.RequiredValue" relativePoint="BOTTOMLEFT" x="0" y="-18"/>
                            </Anchors>
                        </FontString>
                        <FontString parentKey="OwnedValue" inherits="GameFontHighlight">
                            <Size x="90" y="24"/>
                            <Anchors>
                                <Anchor point="TOPLEFT" relativeKey="$parent.OwnedLabel" relativePoint="BOTTOMLEFT" x="0" y="-6"/>
                            </Anchors>
                            <JustifyH value="LEFT"/>
                            <JustifyV value="TOP"/>
                            <Color r="1" g="1" b="1"/>
                        </FontString>
                        <Texture parentKey="OwnedIcon" file="Interface\Icons\INV_Misc_Coin_01">
                            <Size x="16" y="16"/>
                            <Anchors>
                                <Anchor point="LEFT" relativeKey="$parent.OwnedValue" relativePoint="RIGHT" x="6" y="-3"/>
                            </Anchors>
                        </Texture>
                        
                        <FontString parentKey="StatusText" inherits="GameFontHighlightSmall" maxLines="2">
                            <Anchors>
                                <Anchor point="TOPLEFT" relativeKey="$parent.OwnedIcon" relativePoint="BOTTOMLEFT" x="0" y="-24"/>
                                <Anchor point="RIGHT" x="-12" y="0"/>
                            </Anchors>
                            <JustifyH value="LEFT"/>
                            <JustifyV value="TOP"/>
                        </FontString>
                    </Layer>
                </Layers>
            </Frame>

            <Frame parentKey="PlayerCurrencies" hidden="true">
                <Size x="1" y="1"/>
                <Anchors>
                    <Anchor point="BOTTOMLEFT" x="-1000" y="-1000"/>
                </Anchors>
                <Layers>
                    <Layer level="BACKGROUND">
                        <Texture parentKey="Background" file="Interface\Buttons\WHITE8X8">
                            <Anchors>
                                <Anchor point="TOPLEFT" x="16" y="2"/>
                                <Anchor point="BOTTOMRIGHT" x="-16" y="-2"/>
                            </Anchors>
                            <Color r="0.07" g="0.09" b="0.14" a="0.3"/>
                        </Texture>
                    </Layer>
                    <Layer level="ARTWORK">
                        <FontString parentKey="WalletLabel" inherits="GameFontHighlightSmall" text="Carried:">
                            <Anchors>
                                <Anchor point="LEFT" x="26" y="0"/>
                            </Anchors>
                        </FontString>
                        <Texture parentKey="TokenIcon" file="Interface\Icons\INV_Misc_Coin_01">
                            <Size x="14" y="14"/>
                            <Anchors>
                                <Anchor point="LEFT" relativeKey="$parent.WalletLabel" relativePoint="RIGHT" x="6" y="2"/>
                            </Anchors>
                        </Texture>
                        <FontString parentKey="TokenCount" inherits="GameFontHighlightSmall">
                            <Anchors>
                                <Anchor point="LEFT" relativeKey="$parent.TokenIcon" relativePoint="RIGHT" x="4" y="0"/>
                            </Anchors>
                        </FontString>
                        <Texture parentKey="EssenceIcon" file="Interface\Icons\INV_Misc_Gem_Amethyst_01">
                            <Size x="14" y="14"/>
                            <Anchors>
                                <Anchor point="LEFT" relativeKey="$parent.TokenCount" relativePoint="RIGHT" x="12" y="2"/>
                            </Anchors>
                        </Texture>
                        <FontString parentKey="EssenceCount" inherits="GameFontHighlightSmall">
                            <Anchors>
                                <Anchor point="LEFT" relativeKey="$parent.EssenceIcon" relativePoint="RIGHT" x="4" y="0"/>
                            </Anchors>
                        </FontString>
                    </Layer>
                </Layers>
            </Frame>

            <Button name="$parentUpgradeButton" parentKey="UpgradeButton" inherits="UIPanelButtonTemplate" text="UPGRADE">
                <Size x="160" y="22"/>
                <Anchors>
                    <Anchor point="BOTTOM" x="0" y="32"/>
                </Anchors>
                <Layers>
                    <Layer level="OVERLAY">
                        <Texture parentKey="Glow" file="Interface\Buttons\WHITE8X8" alphaMode="ADD" hidden="true">
                            <Anchors>
                                <Anchor point="TOPLEFT" x="-6" y="6"/>
                                <Anchor point="BOTTOMRIGHT" x="6" y="-6"/>
                            </Anchors>
                            <Color r="0.2" g="0.8" b="1" a="0.35"/>
                        </Texture>
                    </Layer>
                </Layers>
                <Scripts>
                    <OnClick>
                        DarkChaos_ItemUpgrade_UpgradeButton_OnClick(this);
                    </OnClick>
                    <OnEnter>
                        if not this:IsEnabled() then
                            GameTooltip:SetOwner(this, "ANCHOR_RIGHT");
                            GameTooltip:SetText(this.disabledTooltip or "Cannot upgrade this item.", 1, 0.1, 0.1);
                            GameTooltip:Show();
                        end
                    </OnEnter>
                    <OnLeave>
                        GameTooltip:Hide();
                    </OnLeave>
                </Scripts>
            </Button>

            <Button name="$parentCancelButton" parentKey="CancelButton" inherits="UIPanelButtonTemplate" text="CANCEL" hidden="true">
                <Size x="120" y="22"/>
                <Anchors>
                    <Anchor point="RIGHT" relativeKey="$parent.UpgradeButton" relativePoint="LEFT" x="-4" y="0"/>
                </Anchors>
                <Scripts>
                    <OnClick>
                        DarkChaos_ItemUpgrade_CancelButton_OnClick(this);
                    </OnClick>
                </Scripts>
            </Button>

            <Button name="$parentBrowseButton" parentKey="BrowseButton" inherits="UIPanelButtonTemplate" text="Browse Items">
                <Size x="120" y="22"/>
                <Anchors>
                    <Anchor point="BOTTOM" x="0" y="4"/>
                </Anchors>
                <Scripts>
                    <OnClick>
                        DarkChaos_ItemUpgrade_BrowseButton_OnClick(this);
                    </OnClick>
                </Scripts>
            </Button>

            <Frame parentKey="DropdownContainer">
                <Size x="160" y="60"/>
                <Anchors>
                    <Anchor point="BOTTOMRIGHT" relativeKey="$parent.UpgradePanel" relativePoint="BOTTOMRIGHT" x="-30" y="38"/>
                </Anchors>
                <Layers>
                    <Layer level="ARTWORK">
                        <FontString parentKey="Label" inherits="GameFontNormal" text="Target Level:">
                            <Anchors>
                                <Anchor point="BOTTOM" relativeKey="$parent.Dropdown" relativePoint="TOP" x="16" y="4"/>
                            </Anchors>
                            <Color r="1" g="0.82" b="0"/>
                        </FontString>
                    </Layer>
                </Layers>
                <Frames>
                    <Frame name="$parentDropdown" parentKey="Dropdown" inherits="UIDropDownMenuTemplate">
                        <Anchors>
                            <Anchor point="BOTTOM" x="0" y="0"/>
                        </Anchors>
                    </Frame>
                </Frames>
            </Frame>

            <Button name="$parentCompareButton" parentKey="CompareButton" inherits="UIPanelButtonTemplate" text="Compare">
                <Size x="80" y="22"/>
                <Anchors>
                    <Anchor point="LEFT" relativeKey="$parent.SettingsButton" relativePoint="RIGHT" x="4" y="0"/>
                </Anchors>
                <Scripts>
                    <OnClick>
                        DarkChaos_ItemUpgrade_CompareButton_OnClick(this);
                    </OnClick>
                </Scripts>
            </Button>
        </Frames>

        <Scripts>
            <OnLoad>
                DarkChaos_ItemUpgrade_OnLoad(this);
            </OnLoad>
            <OnShow>
                DarkChaos_ItemUpgrade_OnShow(this);
            </OnShow>
            <OnHide>
                DarkChaos_ItemUpgrade_OnHide(this);
            </OnHide>
            <OnEvent>
                DarkChaos_ItemUpgrade_OnEvent(this, event, ...);
            </OnEvent>
            <OnUpdate>
                DarkChaos_ItemUpgrade_OnUpdate(this, elapsed);
            </OnUpdate>
        </Scripts>
    </Frame>

    <Frame name="DarkChaos_ItemUpgrade_DebugFrame" parent="UIParent" enableMouse="true" movable="true" hidden="true" toplevel="true">
        <Size x="420" y="220"/>
        <Anchors>
            <Anchor point="TOPLEFT" relativeTo="DarkChaos_ItemUpgradeFrame" relativePoint="TOPRIGHT" x="12" y="0"/>
        </Anchors>
        <Backdrop bgFile="Interface\DialogFrame\UI-DialogBox-Background" edgeFile="Interface\DialogFrame\UI-DialogBox-Border" tile="true">
            <BackgroundInsets>
                <AbsInset left="11" right="12" top="12" bottom="11"/>
            </BackgroundInsets>
            <TileSize>
                <AbsValue val="32"/>
            </TileSize>
            <EdgeSize>
                <AbsValue val="32"/>
            </EdgeSize>
        </Backdrop>
        <Layers>
            <Layer level="ARTWORK">
                <FontString name="$parentTitle" inherits="GameFontNormal" text="DC-ItemUpgrade Debug">
                    <Anchors>
                        <Anchor point="TOP" x="0" y="-15"/>
                    </Anchors>
                </FontString>
            </Layer>
        </Layers>
        <Frames>
            <ScrollingMessageFrame name="$parentScroll" parentKey="Scroll" enableMouseWheel="true" fading="false" maxLines="1000">
                <Size x="370" y="160"/>
                <Anchors>
                    <Anchor point="TOP" x="0" y="-40"/>
                </Anchors>
                <FontString inherits="GameFontHighlightSmall"/>
                <Scripts>
                    <OnMouseWheel>
                        if arg1 > 0 then this:ScrollUp(); else this:ScrollDown(); end
                    </OnMouseWheel>
                </Scripts>
            </ScrollingMessageFrame>
            <Button name="$parentCloseButton" inherits="UIPanelCloseButton">
                <Anchors>
                    <Anchor point="TOPRIGHT" x="-3" y="-3"/>
                </Anchors>
            </Button>
        </Frames>
    </Frame>

    <Frame name="DarkChaos_ItemBrowserFrame" parent="UIParent" enableMouse="true" movable="true" hidden="true" toplevel="true">
        <Size x="300" y="400"/>
        <Anchors>
            <Anchor point="LEFT" relativeTo="DarkChaos_ItemUpgradeFrame" relativePoint="RIGHT" x="10" y="0"/>
        </Anchors>
        <Backdrop bgFile="Interface\DialogFrame\UI-DialogBox-Background" edgeFile="Interface\DialogFrame\UI-DialogBox-Border" tile="true">
            <BackgroundInsets>
                <AbsInset left="11" right="12" top="12" bottom="11"/>
            </BackgroundInsets>
            <TileSize>
                <AbsValue val="32"/>
            </TileSize>
            <EdgeSize>
                <AbsValue val="32"/>
            </EdgeSize>
        </Backdrop>
        <Layers>
            <Layer level="ARTWORK">
                <FontString name="$parentTitle" inherits="GameFontNormal" text="Equipment">
                    <Anchors>
                        <Anchor point="TOP" x="0" y="-15"/>
                    </Anchors>
                </FontString>
            </Layer>
        </Layers>
        <Frames>
            <Button name="$parentCloseButton" inherits="UIPanelCloseButton">
                <Anchors>
                    <Anchor point="TOPRIGHT" x="-3" y="-3"/>
                </Anchors>
            </Button>
            <ScrollFrame name="$parentScrollFrame" parentKey="ScrollFrame" inherits="FauxScrollFrameTemplate">
                <Size x="270" y="350"/>
                <Anchors>
                    <Anchor point="TOP" x="-10" y="-40"/>
                </Anchors>
                <Scripts>
                    <OnVerticalScroll>
                        FauxScrollFrame_OnVerticalScroll(this, offset, 32, DarkChaos_ItemBrowser_Update);
                    </OnVerticalScroll>
                </Scripts>
            </ScrollFrame>
        </Frames>
        <Scripts>
            <OnLoad>
                DarkChaos_ItemBrowser_OnLoad(this);
            </OnLoad>
            <OnShow>
                DarkChaos_ItemBrowser_OnShow(this);
            </OnShow>
        </Scripts>
    </Frame>

    <Frame name="DarkChaos_ItemCompareFrame" parent="UIParent" enableMouse="true" movable="true" hidden="true" toplevel="true">
        <Size x="700" y="500"/>
        <Anchors>
            <Anchor point="CENTER"/>
        </Anchors>
        <Backdrop bgFile="Interface\DialogFrame\UI-DialogBox-Background" edgeFile="Interface\DialogFrame\UI-DialogBox-Border" tile="true">
            <BackgroundInsets>
                <AbsInset left="11" right="12" top="12" bottom="11"/>
            </BackgroundInsets>
            <TileSize>
                <AbsValue val="32"/>
            </TileSize>
            <EdgeSize>
                <AbsValue val="32"/>
            </EdgeSize>
        </Backdrop>

        <Layers>
            <Layer level="ARTWORK">
                <FontString parentKey="TitleText" inherits="GameFontNormalLarge" text="Item Comparison">
                    <Anchors>
                        <Anchor point="TOPLEFT" x="80" y="-44"/>
                    </Anchors>
                </FontString>
            </Layer>
        </Layers>

        <Frames>
            <Button name="$parentCloseButton" inherits="UIPanelCloseButton">
                <Anchors>
                    <Anchor point="TOPRIGHT" x="-5" y="-5"/>
                </Anchors>
            </Button>

            <!-- Left Item Panel -->
            <Frame parentKey="LeftPanel">
                <Size x="320" y="400"/>
                <Anchors>
                    <Anchor point="TOPLEFT" x="20" y="-80"/>
                </Anchors>
                <Backdrop bgFile="Interface\Tooltips\UI-Tooltip-Background" edgeFile="Interface\Tooltips\UI-Tooltip-Border" tile="true">
                    <EdgeSize>
                        <AbsValue val="16"/>
                    </EdgeSize>
                    <BackgroundInsets>
                        <AbsInset left="5" right="5" top="5" bottom="5"/>
                    </BackgroundInsets>
                </Backdrop>
                <BackdropColor r="0.09" g="0.09" b="0.13" a="0.95"/>
                <BackdropBorderColor r="0.35" g="0.35" b="0.4" a="1"/>
                <Layers>
                    <Layer level="ARTWORK">
                        <FontString parentKey="Header" inherits="GameFontHighlight" text="Current Item">
                            <Anchors>
                                <Anchor point="TOPLEFT" x="12" y="-10"/>
                            </Anchors>
                        </FontString>
                        <FontString parentKey="ItemName" inherits="GameFontNormalLarge" justifyH="LEFT" hidden="true">
                            <Size x="296" y="0"/>
                            <Anchors>
                                <Anchor point="TOPLEFT" x="12" y="-36"/>
                            </Anchors>
                        </FontString>
                        <FontString parentKey="ItemLevel" inherits="GameFontHighlight" hidden="true">
                            <Size x="296" y="0"/>
                            <Anchors>
                                <Anchor point="TOPLEFT" relativeKey="$parent.ItemName" relativePoint="BOTTOMLEFT" x="0" y="-4"/>
                            </Anchors>
                        </FontString>
                        <FontString parentKey="UpgradeLevel" inherits="GameFontHighlightSmall" hidden="true">
                            <Size x="296" y="0"/>
                            <Anchors>
                                <Anchor point="TOPLEFT" relativeKey="$parent.ItemLevel" relativePoint="BOTTOMLEFT" x="0" y="-2"/>
                            </Anchors>
                        </FontString>
                        <FontString parentKey="StatsText" inherits="GameFontHighlightSmall" justifyH="LEFT" maxLines="12" hidden="true">
                            <Size x="296" y="0"/>
                            <Anchors>
                                <Anchor point="TOPLEFT" relativeKey="$parent.UpgradeLevel" relativePoint="BOTTOMLEFT" x="0" y="-8"/>
                            </Anchors>
                        </FontString>
                    </Layer>
                </Layers>
            </Frame>

            <!-- Right Item Panel -->
            <Frame parentKey="RightPanel">
                <Size x="320" y="400"/>
                <Anchors>
                    <Anchor point="TOPRIGHT" x="-20" y="-80"/>
                </Anchors>
                <Backdrop bgFile="Interface\Tooltips\UI-Tooltip-Background" edgeFile="Interface\Tooltips\UI-Tooltip-Border" tile="true">
                    <EdgeSize>
                        <AbsValue val="16"/>
                    </EdgeSize>
                    <BackgroundInsets>
                        <AbsInset left="5" right="5" top="5" bottom="5"/>
                    </BackgroundInsets>
                </Backdrop>
                <BackdropColor r="0.09" g="0.09" b="0.13" a="0.95"/>
                <BackdropBorderColor r="0.35" g="0.35" b="0.4" a="1"/>
                <Layers>
                    <Layer level="ARTWORK">
                        <FontString parentKey="Header" inherits="GameFontHighlight" text="Upgraded Item">
                            <Anchors>
                                <Anchor point="TOPLEFT" x="12" y="-10"/>
                            </Anchors>
                        </FontString>
                        <FontString parentKey="ItemName" inherits="GameFontNormalLarge" justifyH="LEFT" hidden="true">
                            <Size x="296" y="0"/>
                            <Anchors>
                                <Anchor point="TOPLEFT" x="12" y="-36"/>
                            </Anchors>
                        </FontString>
                        <FontString parentKey="ItemLevel" inherits="GameFontHighlight" hidden="true">
                            <Size x="296" y="0"/>
                            <Anchors>
                                <Anchor point="TOPLEFT" relativeKey="$parent.ItemName" relativePoint="BOTTOMLEFT" x="0" y="-4"/>
                            </Anchors>
                        </FontString>
                        <FontString parentKey="UpgradeLevel" inherits="GameFontHighlightSmall" hidden="true">
                            <Size x="296" y="0"/>
                            <Anchors>
                                <Anchor point="TOPLEFT" relativeKey="$parent.ItemLevel" relativePoint="BOTTOMLEFT" x="0" y="-2"/>
                            </Anchors>
                        </FontString>
                        <FontString parentKey="StatsText" inherits="GameFontHighlightSmall" justifyH="LEFT" maxLines="12" hidden="true">
                            <Size x="296" y="0"/>
                            <Anchors>
                                <Anchor point="TOPLEFT" relativeKey="$parent.UpgradeLevel" relativePoint="BOTTOMLEFT" x="0" y="-8"/>
                            </Anchors>
                        </FontString>
                    </Layer>
                </Layers>
            </Frame>

            <!-- Comparison Controls -->
            <Frame parentKey="ControlsPanel">
                <Size x="660" y="50"/>
                <Anchors>
                    <Anchor point="BOTTOM" x="0" y="20"/>
                </Anchors>
                <Layers>
                    <Layer level="ARTWORK">
                        <FontString parentKey="Label" inherits="GameFontHighlight" text="Compare to upgrade level:" justifyH="CENTER">
                            <Anchors>
                                <Anchor point="TOP" x="0" y="0"/>
                            </Anchors>
                        </FontString>
                    </Layer>
                </Layers>
                <Frames>
                    <Frame name="$parentDropdown" parentKey="Dropdown" inherits="UIDropDownMenuTemplate">
                        <Anchors>
                            <Anchor point="TOP" relativeKey="$parent.Label" relativePoint="BOTTOM" x="-16" y="-4"/>
                        </Anchors>
                    </Frame>
                    <Button parentKey="CalculateButton" inherits="UIPanelButtonTemplate" text="Calculate">
                        <Size x="100" y="22"/>
                        <Anchors>
                            <Anchor point="LEFT" relativeKey="$parent.Dropdown" relativePoint="RIGHT" x="20" y="2"/>
                        </Anchors>
                        <Scripts>
                            <OnClick>
                                DarkChaos_ItemCompare_CalculateButton_OnClick(this);
                            </OnClick>
                        </Scripts>
                    </Button>
                </Frames>
            </Frame>
        </Frames>

        <Scripts>
            <OnLoad>
                DarkChaos_ItemCompare_OnLoad(this);
            </OnLoad>
            <OnShow>
                DarkChaos_ItemCompare_OnShow(this);
            </OnShow>
            <OnHide>
                DarkChaos_ItemCompare_OnHide(this);
            </OnHide>
        </Scripts>
    </Frame>

    <!-- Character Frame Button -->
    <Button name="DC_ItemUpgrade_CharFrameButton" parent="CharacterFrame" hidden="false">
        <Size x="32" y="32"/>
        <Anchors>
            <Anchor point="TOPRIGHT" relativeTo="CharacterFrame" relativePoint="TOPRIGHT" x="0" y="-95"/>
        </Anchors>
        <Layers>
            <Layer level="BACKGROUND">
                <Texture name="$parentIcon" file="Interface\LFGFrame\UI-LFG-ICON-REWARDS">
                    <Size x="28" y="28"/>
                    <Anchors>
                        <Anchor point="CENTER"/>
                    </Anchors>
                </Texture>
            </Layer>
            <Layer level="OVERLAY">
                <Texture name="$parentBorder" file="Interface\Buttons\UI-Quickslot2">
                    <Size x="64" y="64"/>
                    <Anchors>
                        <Anchor point="CENTER"/>
                    </Anchors>
                </Texture>
            </Layer>
        </Layers>
        <HighlightTexture file="Interface\Buttons\ButtonHilight-Square" alphaMode="ADD"/>
        <Scripts>
            <OnLoad>
                DC_ItemUpgrade_CharFrameButton_OnLoad(self);
            </OnLoad>
            <OnClick>
                DC_ItemUpgrade_CharFrameButton_OnClick(self);
            </OnClick>
            <OnEnter>
                GameTooltip:SetOwner(self, "ANCHOR_RIGHT");
                GameTooltip:SetText("Item Upgrade", 1, 1, 1);
                GameTooltip:AddLine("Open the Item Upgrade interface", 0.8, 0.8, 0.8, true);
                GameTooltip:Show();
            </OnEnter>
            <OnLeave>
                GameTooltip:Hide();
            </OnLeave>
        </Scripts>
    </Button>

    <!-- Bag Frame Button -->
    <Button name="DC_ItemUpgrade_BagFrameButton" parent="UIParent" hidden="false">
        <Size x="36" y="36"/>
        <Anchors>
            <Anchor point="RIGHT" relativeTo="MainMenuBarBackpackButton" relativePoint="LEFT" x="-2" y="0"/>
        </Anchors>
        <Layers>
            <Layer level="BACKGROUND">
                <Texture name="$parentIcon" file="Interface\LFGFrame\UI-LFG-ICON-REWARDS">
                    <Size x="32" y="32"/>
                    <Anchors>
                        <Anchor point="CENTER"/>
                    </Anchors>
                </Texture>
            </Layer>
            <Layer level="OVERLAY">
                <Texture name="$parentBorder" file="Interface\Buttons\UI-Quickslot2">
                    <Size x="64" y="64"/>
                    <Anchors>
                        <Anchor point="CENTER"/>
                    </Anchors>
                </Texture>
            </Layer>
        </Layers>
        <HighlightTexture file="Interface\Buttons\ButtonHilight-Square" alphaMode="ADD"/>
        <Scripts>
            <OnLoad>
                DC_ItemUpgrade_BagFrameButton_OnLoad(self);
            </OnLoad>
            <OnClick>
                DC_ItemUpgrade_BagFrameButton_OnClick(self);
            </OnClick>
            <OnEnter>
                GameTooltip:SetOwner(self, "ANCHOR_RIGHT");
                GameTooltip:SetText("Item Upgrade", 1, 1, 1);
                GameTooltip:AddLine("Open the Item Upgrade interface", 0.8, 0.8, 0.8, true);
                GameTooltip:Show();
            </OnEnter>
            <OnLeave>
                GameTooltip:Hide();
            </OnLeave>
        </Scripts>
    </Button>

</Ui>
