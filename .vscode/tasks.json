{
	"version": "2.0.0",
	"tasks": [
		{
			"label": "AzerothCore: Dashboard",
			"type": "shell",
			"command": "./acore.sh",
			"group": "none",
			"presentation": {
				"reveal": "always",
				"panel": "new"
			},
			"problemMatcher": []
		},
		{
			"label": "AzerothCore: Download client-data",
			"type": "shell",
			"command": "./acore.sh client-data",
			"group": "none",
			"presentation": {
				"reveal": "always",
				"panel": "new"
			},
			"problemMatcher": []
		},
		{
			"label": "AzerothCore: Clean build",
			"type": "shell",
			"command": "./acore.sh compiler clean",
			"group": "build",
			"presentation": {
				"reveal": "always",
				"panel": "new"
			},
			"problemMatcher": []
		},
		{
			"label": "AzerothCore: Build",
			"type": "shell",
			"command": "powershell",
			"args": [
				"-NoProfile",
				"-ExecutionPolicy",
				"Bypass",
				"-File",
				"apps/git_tools/ssh-sync-and-build.ps1",
				"-RemoteHost",
				"${input:remoteHost}",
				"-RemoteUser",
				"${input:remoteUser}",
				"-RemotePassword",
				"${input:remotePassword}",
				"-RemoteRepoPath",
				"${input:remoteRepoPath}",
				"-PrivateKeyPath",
				"${env:USERPROFILE}\\.ssh\\id_ed25519"
			],
			"group": {
				"kind": "build",
				"isDefault": true
			},
			"presentation": {
				"reveal": "always",
				"panel": "new"
			},
			"problemMatcher": [
				"$gcc",
				"$msCompile"
			]
		},
		{
			"label": "AzerothCore: Build (local only)",
			"type": "shell",
			"command": "./acore.sh compiler build",
			"group": {
				"kind": "build",
				"isDefault": false
			},
			"presentation": {
				"reveal": "always",
				"panel": "new"
			},
			"problemMatcher": [
				"$gcc",
				"$msCompile"
			]
		},
		{
			"label": "AzerothCore: Build (with stored credentials)",
			"type": "shell",
			"command": "powershell",
			"args": [
				"-NoProfile",
				"-ExecutionPolicy",
				"Bypass",
				"-Command",
				"$password = & 'apps/git_tools/credential-manager.ps1' -Action get -Key 'ssh-password'; & 'apps/git_tools/ssh-sync-and-build.ps1' -UseStoredCredentials -RemotePassword $password"
			],
			"group": "build",
			"presentation": {
				"reveal": "always",
				"panel": "new"
			},
			"problemMatcher": [
				"$gcc",
				"$msCompile"
			]
		},
		{
			"label": "AzerothCore: Setup SSH Credentials",
			"type": "shell",
			"command": "powershell",
			"args": [
				"-NoProfile",
				"-ExecutionPolicy",
				"Bypass",
				"-Command",
				"& 'apps/git_tools/credential-manager.ps1' -Action set -Key 'ssh-password' -Secure"
			],
			"group": "none",
			"presentation": {
				"reveal": "always",
				"panel": "new"
			},
			"problemMatcher": []
		},
		{
			"label": "AzerothCore: Check codestyle cpp",
			"type": "shell",
			"command": "python apps/codestyle/codestyle-cpp.py",
			"group": "none",
			"presentation": {
				"reveal": "always",
				"panel": "new"
			},
			"problemMatcher": []
		},
		{
			"label": "AzerothCore: Check codestyle sql",
			"type": "shell",
			"command": "python apps/codestyle/codestyle-sql.py",
			"group": "none",
			"presentation": {
				"reveal": "always",
				"panel": "new"
			},
			"problemMatcher": []
		},
		{
			"label": "AzerothCore: Run authserver (restarter)",
			"type": "shell",
			"command": "./acore.sh run-authserver",
			"group": "none",
			"presentation": {
				"reveal": "always",
				"panel": "new"
			},
			"problemMatcher": []
		},
		{
			"label": "AzerothCore: Run worldserver (restarter)",
			"type": "shell",
			"command": "./acore.sh run-worldserver",
			"group": "none",
			"presentation": {
				"reveal": "always",
				"panel": "new"
			},
			"problemMatcher": []
		}
	],
	"inputs": [
		{
			"id": "remoteHost",
			"type": "promptString",
			"description": "SSH server hostname or IP address",
			"default": "your-build-server.com"
		},
		{
			"id": "remoteUser",
			"type": "promptString",
			"description": "SSH username for remote build host",
			"default": "wowcore"
		},
		{
			"id": "remotePassword",
			"type": "promptString",
			"description": "SSH password for remote build host (leave blank if using key)",
			"password": true
		},
		{
			"id": "remoteRepoPath",
			"type": "promptString",
			"description": "Absolute repo path on remote host",
			"default": "/home/wowcore/azerothcore"
		},
		{
				"id": "privateKeyPath",
				"type": "promptString",
				"description": "Path to SSH private key file (optional)",
				"default": "${env:USERPROFILE}\\.ssh\\id_ed25519"
		}
	]
}
